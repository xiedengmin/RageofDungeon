[gd_scene load_steps=27 format=3 uid="uid://by5drgjg5p1vm"]

[ext_resource type="PackedScene" path="res://src/component/act1/RightGate.tscn" id="1"]
[ext_resource type="Texture2D" uid="uid://dt737fegcc41c" path="res://assets/images/map/act1/01tile03.png" id="2"]
[ext_resource type="Texture2D" uid="uid://clhm2ahsnk30s" path="res://assets/images/map/act1/granflorissidegate05.png" id="3"]
[ext_resource type="Texture2D" uid="uid://chnjjdxp4v52e" path="res://assets/images/map/act1/01tile02.png" id="4"]
[ext_resource type="Texture2D" uid="uid://s3unr7x3knpn" path="res://assets/images/map/act1/01tile01.png" id="6"]
[ext_resource type="Texture2D" uid="uid://b6qskaiti6ake" path="res://assets/images/map/act1/granflorissidedoor05.png" id="7"]
[ext_resource type="Texture2D" uid="uid://c2jwvlx7r4gib" path="res://assets/images/map/bg/01mid1.png" id="8"]
[ext_resource type="Texture2D" uid="uid://ypyibvj8mh5b" path="res://assets/images/map/bg/01far1.png" id="9"]
[ext_resource type="Texture2D" uid="uid://cw0xbkadwuosk" path="res://assets/images/map/act1/granflorissidelight02.png" id="10"]
[ext_resource type="Texture2D" uid="uid://dkyasm3llhneg" path="res://assets/images/map/act1/01tile00.png" id="11"]
[ext_resource type="Texture2D" uid="uid://b4lvi07uia28j" path="res://assets/images/map/act1/granfloristree01.png" id="12"]
[ext_resource type="PackedScene" path="res://src/component/act1/01obj002.tscn" id="13"]
[ext_resource type="PackedScene" path="res://src/component/act1/01obj007.tscn" id="14"]
[ext_resource type="PackedScene" uid="uid://b0rl4ifo77bi0" path="res://src/component/act1/01obj001.tscn" id="15"]
[ext_resource type="Texture2D" uid="uid://bx8ki5xxlkukl" path="res://assets/images/map/act1/01obj202.png" id="16"]
[ext_resource type="Texture2D" uid="uid://bwovky2b8yen6" path="res://assets/images/map/act1/granflorisbush01.png" id="17"]
[ext_resource type="PackedScene" path="res://src/component/act1/treasurebox.tscn" id="18"]
[ext_resource type="Script" uid="uid://cduggcb4icc6t" path="res://src/dungeon/DungeonStage.cs" id="19"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_sas81"]
texture = ExtResource("2")
texture_region_size = Vector2i(224, 480)
0:0/next_alternative_id = 8
0:0/0 = 0
0:0/1 = 1
0:0/1/flip_h = true
0:0/2 = 2
0:0/2/flip_v = true
0:0/3 = 3
0:0/3/flip_h = true
0:0/3/flip_v = true
0:0/4 = 4
0:0/4/transpose = true
0:0/5 = 5
0:0/5/flip_h = true
0:0/5/transpose = true
0:0/6 = 6
0:0/6/flip_v = true
0:0/6/transpose = true
0:0/7 = 7
0:0/7/flip_h = true
0:0/7/flip_v = true
0:0/7/transpose = true

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_gc0sb"]
texture = ExtResource("4")
texture_region_size = Vector2i(224, 480)
0:0/next_alternative_id = 8
0:0/0 = 0
0:0/1 = 1
0:0/1/flip_h = true
0:0/2 = 2
0:0/2/flip_v = true
0:0/3 = 3
0:0/3/flip_h = true
0:0/3/flip_v = true
0:0/4 = 4
0:0/4/transpose = true
0:0/5 = 5
0:0/5/flip_h = true
0:0/5/transpose = true
0:0/6 = 6
0:0/6/flip_v = true
0:0/6/transpose = true
0:0/7 = 7
0:0/7/flip_h = true
0:0/7/flip_v = true
0:0/7/transpose = true

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_hv0od"]
texture = ExtResource("6")
texture_region_size = Vector2i(224, 480)
0:0/next_alternative_id = 8
0:0/0 = 0
0:0/1 = 1
0:0/1/flip_h = true
0:0/2 = 2
0:0/2/flip_v = true
0:0/3 = 3
0:0/3/flip_h = true
0:0/3/flip_v = true
0:0/4 = 4
0:0/4/transpose = true
0:0/5 = 5
0:0/5/flip_h = true
0:0/5/transpose = true
0:0/6 = 6
0:0/6/flip_v = true
0:0/6/transpose = true
0:0/7 = 7
0:0/7/flip_h = true
0:0/7/flip_v = true
0:0/7/transpose = true

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_cgthw"]
texture = ExtResource("11")
texture_region_size = Vector2i(224, 480)
0:0/next_alternative_id = 8
0:0/0 = 0
0:0/1 = 1
0:0/1/flip_h = true
0:0/2 = 2
0:0/2/flip_v = true
0:0/3 = 3
0:0/3/flip_h = true
0:0/3/flip_v = true
0:0/4 = 4
0:0/4/transpose = true
0:0/5 = 5
0:0/5/flip_h = true
0:0/5/transpose = true
0:0/6 = 6
0:0/6/flip_v = true
0:0/6/transpose = true
0:0/7 = 7
0:0/7/flip_h = true
0:0/7/flip_v = true
0:0/7/transpose = true

[sub_resource type="TileSet" id="1"]
sources/4 = SubResource("TileSetAtlasSource_sas81")
sources/5 = SubResource("TileSetAtlasSource_gc0sb")
sources/6 = SubResource("TileSetAtlasSource_hv0od")
sources/7 = SubResource("TileSetAtlasSource_cgthw")

[sub_resource type="Animation" id="Animation_wamu1"]
resource_name = "flash"
step = 0.5
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("granflorissidelight01:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5, 1),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0), Color(1, 1, 1, 1), Color(1, 1, 1, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_johhx"]
_data = {
&"flash": SubResource("Animation_wamu1")
}

[sub_resource type="RectangleShape2D" id="2"]
size = Vector2(1180.82, 82.393)

[node name="stage_03" type="Node2D"]
script = ExtResource("19")
bgm = "forest02"
env = "amb_forest_01"

[node name="environment" type="Node2D" parent="."]

[node name="background" type="ParallaxBackground" parent="environment"]

[node name="far" type="ParallaxLayer" parent="environment/background"]
motion_scale = Vector2(0.7, 1)
motion_mirroring = Vector2(640, 0)

[node name="Sprite2D" type="Sprite2D" parent="environment/background/far"]
texture = ExtResource("9")
centered = false
region_enabled = true
region_rect = Rect2(0, 0, 925, 375)

[node name="mid" type="ParallaxLayer" parent="environment/background"]
motion_scale = Vector2(0.9, 1)
motion_mirroring = Vector2(640, 0)

[node name="Sprite2D" type="Sprite2D" parent="environment/background/mid"]
texture = ExtResource("8")
centered = false
region_enabled = true
region_rect = Rect2(0, 0, 640, 379)

[node name="TileMap" type="TileMap" parent="environment"]
position = Vector2(0, 80)
tile_set = SubResource("1")
format = 2
layer_0/tile_data = PackedInt32Array(0, 4, 0, 1, 5, 0, 2, 6, 0, 3, 4, 0, 4, 4, 0)

[node name="granfloristree01" type="Sprite2D" parent="environment"]
position = Vector2(1001.77, 210.681)
texture = ExtResource("12")

[node name="RightGate" parent="environment" instance=ExtResource("1")]
position = Vector2(1052.03, 359.077)
texture = ExtResource("3")

[node name="granflorissidelight01" parent="environment/RightGate" index="0"]
texture = ExtResource("10")

[node name="AnimationPlayer" parent="environment/RightGate" index="1"]
libraries = {
"": SubResource("AnimationLibrary_johhx")
}

[node name="granflorissidedoor01" parent="environment/RightGate" index="2"]
texture = ExtResource("7")

[node name="01obj202" type="Sprite2D" parent="environment"]
position = Vector2(752.37, 442.23)
texture = ExtResource("16")

[node name="granflorisbush01" type="Sprite2D" parent="environment"]
position = Vector2(-32.2618, 354.95)
texture = ExtResource("17")
flip_h = true

[node name="granflorisbush02" type="Sprite2D" parent="environment"]
position = Vector2(62.1315, 518.265)
texture = ExtResource("17")
flip_h = true

[node name="granflorisbush03" type="Sprite2D" parent="environment"]
position = Vector2(1144.42, 522.152)
texture = ExtResource("17")

[node name="stage" type="Node2D" parent="."]

[node name="objs" type="Node2D" parent="stage"]

[node name="01obj007" parent="stage/objs" instance=ExtResource("14")]
position = Vector2(324.702, 367.376)

[node name="01obj008" parent="stage/objs" instance=ExtResource("14")]
position = Vector2(380.888, 389.102)

[node name="01obj009" parent="stage/objs" instance=ExtResource("14")]
position = Vector2(532.966, 377.49)

[node name="01obj010" parent="stage/objs" instance=ExtResource("14")]
position = Vector2(702.237, 380.163)

[node name="01obj011" parent="stage/objs" instance=ExtResource("14")]
position = Vector2(641.656, 414.462)

[node name="01obj012" parent="stage/objs" instance=ExtResource("14")]
position = Vector2(664.82, 483.061)

[node name="01obj013" parent="stage/objs" instance=ExtResource("14")]
position = Vector2(554.348, 509.343)

[node name="01obj014" parent="stage/objs" instance=ExtResource("14")]
position = Vector2(490.203, 455.444)

[node name="01obj015" parent="stage/objs" instance=ExtResource("14")]
position = Vector2(459.022, 472.371)

[node name="01obj016" parent="stage/objs" instance=ExtResource("14")]
position = Vector2(426.504, 522.706)

[node name="01obj017" parent="stage/objs" instance=ExtResource("14")]
position = Vector2(394.432, 495.088)

[node name="01obj018" parent="stage/objs" instance=ExtResource("14")]
position = Vector2(324.496, 505.334)

[node name="01obj001" parent="stage/objs" instance=ExtResource("15")]
position = Vector2(405.628, 365.33)

[node name="01obj002" parent="stage/objs" instance=ExtResource("15")]
position = Vector2(371.141, 527.657)

[node name="01obj003" parent="stage/objs" instance=ExtResource("15")]
position = Vector2(591.145, 423.007)

[node name="01obj004" parent="stage/objs" instance=ExtResource("15")]
position = Vector2(522.171, 446.196)

[node name="01obj005" parent="stage/objs" instance=ExtResource("13")]
position = Vector2(346.763, 374.844)

[node name="01obj006" parent="stage/objs" instance=ExtResource("13")]
position = Vector2(374.709, 394.466)

[node name="01obj019" parent="stage/objs" instance=ExtResource("13")]
position = Vector2(368.763, 447.98)

[node name="01obj020" parent="stage/objs" instance=ExtResource("13")]
position = Vector2(329.519, 456.305)

[node name="01obj021" parent="stage/objs" instance=ExtResource("13")]
position = Vector2(339.627, 496.143)

[node name="01obj022" parent="stage/objs" instance=ExtResource("13")]
position = Vector2(340.222, 533.603)

[node name="01obj023" parent="stage/objs" instance=ExtResource("13")]
position = Vector2(293.248, 527.657)

[node name="01obj024" parent="stage/objs" instance=ExtResource("13")]
position = Vector2(222.49, 515.17)

[node name="01obj025" parent="stage/objs" instance=ExtResource("13")]
position = Vector2(658.335, 416.466)

[node name="01obj026" parent="stage/objs" instance=ExtResource("13")]
position = Vector2(657.146, 473.548)

[node name="01obj027" parent="stage/objs" instance=ExtResource("13")]
position = Vector2(701.741, 512.792)

[node name="treasurebox" parent="stage/objs" instance=ExtResource("18")]
position = Vector2(221.333, 370.898)

[node name="treasurebox2" parent="stage/objs" instance=ExtResource("18")]
position = Vector2(218.158, 443.125)

[node name="treasurebox3" parent="stage/objs" instance=ExtResource("18")]
position = Vector2(222.126, 528.844)

[node name="doors" type="Node2D" parent="."]

[node name="TopLeft" type="Marker2D" parent="."]

[node name="BottomRight" type="Marker2D" parent="."]
position = Vector2(1117.03, 600)

[node name="collision" type="Node2D" parent="."]

[node name="StaticBody2D" type="StaticBody2D" parent="collision"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="collision/StaticBody2D"]
polygon = PackedVector2Array(162.013, 558.803, 147.718, 486.741, 55.2192, 403.492, 69.5145, 356.402, 69.5145, 337.054, 305.806, 337.054, 436.145, 366.492, 576.575, 337.054, 960.024, 337.054, 964.228, 391.719, 995.22, 423.096, 995.5, 361.5, 1078.5, 403.75, 1077, 467.089, 1046.81, 507.348, 1045.22, 558.803, 1167.34, 558.803, 1165.45, -0.577103, -0.611481, -0.577133, -0.611526, 558.803)

[node name="StaticBody2D2" type="StaticBody2D" parent="collision"]
position = Vector2(591.145, 600)

[node name="CollisionShape2D" type="CollisionShape2D" parent="collision/StaticBody2D2"]
shape = SubResource("2")

[editable path="environment/RightGate"]
